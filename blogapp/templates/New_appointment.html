<!--Yiming Sun(2020/3/14)-->
{% extends "logged_base.html" %}

{% block scripts %}
    {{ super() }}
    <script type="text/javascript">
    $('#date').datepicker({
        weekStart: 1,
        autoclose: true,
        daysOfWeekHighlighted: "0,6",
        format: "yyyy-mm-dd",
        language: "zh-CN"
    });

    $(function(){
        $('#petType').change(function(){
            let type = $('#petType').val();
            console.log(type);
            let doctors = $('#doctor');
            $.ajax({
                url:"/New_appointment",
                type:"POST",
                data:({"type":type}),
                success:function (data) {
                    console.log(data);
                    let selects = JSON.parse(data);//JSON字符串转换为JSON对象
                    doctors.children().remove();
                    for (let i=0; i<selects.length; i++){
                        let a = $('<option></option>');
                        a.text(selects[i]);
                        a.attr({value:selects[i]});
                        console.log(a);
                        doctors.append(a);
                    }

                },
                error:function () {

                }
            })

        });
    });


    </script>
{%  endblock %}


{% block content %}

<div class="container" style="margin-top: 100px">
    <h1>make a new appointment</h1>

    <div class="row">
         <div class="col-md-6">
            {% import 'bootstrap/wtf.html' as wtf%}
             {{ wtf.quick_form(form) }}
        </div>

        <div class="col-md-4 border col-md-offset-2" style="border: 1px solid grey">
            {% include 'appointment_flow.html' %}
        </div>
    </div>

</div>

{% endblock %}