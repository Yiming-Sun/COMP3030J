{% extends "logged_base.html" %}

{% block scripts %}
{{super()}}

    <script>
         $(document).ready(function () {
            $('tbody>tr').each(function () {

                if ($(this).children('td').eq(6).text()!="None"){
                    $(this).css({"color": "red"})
                }
            });

            $('button').each(function(){
                $(this).css({"margin":"0px 30px"})
            })
        });

        $(function(){
           $(".delbtn").click(function () {
               let a = $(this).parent().parent().children(".appointment_id");
               console.log(a.text());

               $.ajax({
                   url:"/My_appointment",
                   type:"POST",
                   data:{"appointment_id":a.text()},
                   success:function (data) {
                         console.log(data)
                   },
                   error:function () {

                   }
               })
           })


        })
    </script>


{% endblock %}


{% block content %}

<div class="table-responsive" style="margin-top: 100px;margin-right: 200px;margin-left: 200px">

    <table class="table table-striped table-bordered table-hover">
        <thead>
            <tr>
                <th class="text-center">Order No</th>
                <th class="text-center">Order Date</th>
                <th class="text-center">Pet Type</th>
                <th class="text-center">Pet Name</th>
                <th class="text-center">Attending doctor</th>
                <th class="text-center">Condition</th>
                <th class="text-center">Operation_date</th>
                <th class="text-center">Operations</th>
            </tr>
        </thead>
        {% if my_appointments %}
            <tbody>
                {% for appointment in my_appointments %}
                <tr>
                    <td class="text-center appointment_id">{{appointment.id}}</td>
                    <td class="text-center">{{appointment.date}}</td>
                    <td class="text-center">{% if appointment.petType==1 %}
                            cat
                        {%  elif appointment.petType==2  %}
                            dog
                        {% endif %}</td>
                    <td class="text-center">{{appointment.petName}}</td>
                    <td class="text-center">
                        {% if appointment.doctor==1 %}
                            Allen
                        {%  elif appointment.doctor==2  %}
                            Fred
                        {% endif %}
                    </td>

                    <td class="text-center">
                        {% if appointment.condition==1 %}
                            待确诊
                        {%  elif appointment.condition==2  %}
                            出院
                        {% endif %}
                    </td>
                    <td class="text-center">{{appointment.op_date}}</td>
                    <td>
                        <button class="btn btn-default appform_button"><a href="#">Information</a></button>
                        <button class="btn btn-primary appform_button"><a>Trace</a></button>
                        <button class="btn btn-success appform_button delbtn"><a>Modify</a></button>
<!--    data-toggle表示以什么事件触发， data-target表示事件的目标   -->
                        <button class="btn btn-danger appform_button" type="button" data-toggle="modal" data-target="#my" onclick="f()"><a>Delete</a></button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        {% else %}
            <p>you don't have any appointments before!</p>
        {% endif %}

    </table>

<!--    <div class="modal-dialog col-lg-4 col-lg-offset-4" role="alert">-->
<!--        <p class="text-center" style="font-size: large">do you want to delete?</p><br><br>-->
<!--        <button type="button" class="close" data-dismiss="alert">-->
<!--            <span >close</span>-->
<!--        </button>-->
<!--        <button type="button" class="close" data-dismiss="alert">-->
<!--            <span style="color: red;margin-right: 10px">sure</span>-->
<!--        </button>-->
<!--    </div>-->
    <div class="modal fade" id="my" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Modal title</h4>
                </div>
                <div class="modal-body">
                    <p>content</p>
                </div>
                <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" data-dismiss="modal">Save changes</button>
                </div>
            </div>
        </div>
    </div>

</div>


{% endblock %}

